---
title: Java编程思想 第9章 接口
date: 2017-11-25 01:08:09
tags: [读书笔记, Java编程思想]
---
> 接口和内部类为我们提供了一种将接口与实现分离得更加结构化的方法。
<!--more-->
## 抽象类和抽象方法

Java提供了一个叫做抽象方法的机制，这种方法是不完整的；仅有声明而没有方法体。包含抽象方法的类叫做抽象类。如果一个类包含一个或多个抽象方法，该类必须被限定为抽象的，否则编译器就会报错。

编译器会确保抽象类的纯粹性，无法对抽象类产生对象。如果从一个抽象类继承，并想创建该新类的对象，那么就必须为基类中的所有抽象方法提供方法定义。如果不这样做，那么导出类便也是抽象类，且编译器将会强制使用abstract关键字来限定这个类。

## 接口

interface关键字使抽象的概念更向前迈进了一步。abstract关键字允许人们在类中创建一个或多个没有任何定义的方法——提供了接口部分，但是没有任何相应的具体实现，这些实现是由此类的继承者创建的。interface这个关键字产生一个完全抽象的类，它根本就没有提供任何具体实现。它允许创建者确定方法名、参数列表和放回类型，但是没有任何方法体。接口只提供了形式，而未提供任何具体实现。

一个接口表示：“所有实现了该特定接口的类看起来都像这样”。因此，任何使用某种特定接口的代码都知道可以调用该接口的哪些方法。

可以选择在接口中显示地将方法声明为public的，但即使不这么做，它们也是public的，因此，当要实现一个接口时，在接口中被定义的方法必须被定义为public的，否则，它们将只能得到默认的包访问权限，这样在方法被继承的过程中，其可访问权限就被降低了，这是Java编译器所不允许的。

## 完全解耦

只要一个方法操作的是类而非接口，那么就只能使用这个类及其子类。创建一个能够根据所传递的参数对象的不同而具有不同行为的方法，被称作策略设计模式。这类方法包含所要执行的算法中固定不变的部分，而策略包含变化的部分。策略就是传递进去的参数对象，它包含要执行的代码。或者使用适配器模式生成想要使用的接口。

## Java中的多重继承

接口不仅仅只是一种更纯粹形式的抽象类，它的目标比这更高。因为接口真根本没有任何具体实现的——也就是说，没有任何与接口相关的存储；因此，也就无法阻止多个接口的组合。这一点是很有价值的。类似于C++中的多重继承。

## 通过继承扩展接口

通过继承，可以很容易地在接口中添加新的方法声明，还可以通过继承在新接口中组合数个接口。这两种情况都可以获得新的接口。

在实现多重继承时，如遇到组合接口时名字冲突，会导致覆盖、实现和重载叠加在一起，重载方法不能通过返回值类型不同而区分，这是编译器会报错，其他情况只会造成代码可读性混乱而已。

## 适配接口

接口最吸引人的愿意之一就是允许同一接口具有多个不同的具体实现。在简单的情况中，它的体现形式通常是一个接受接口类型的方法，而该接口的实现和向该方法传递的对象则取决于方法的使用者。

## 接口中的域

因为放入接口中的任何域都自动是static和final的，所以接口就称为了一种很便捷的用来创建常量组的工具。

在接口中定义的域不能是空final，但是可以被非常量表达式初始化。

## 嵌套接口

接口可以嵌套在类或其他接口中。在类中牵头接口的语法是相当显而易见的，就像非嵌套接口一样，可以拥有public和“包访问”两种访问行。

## 接口与工厂

接口是实现多重继承的途径，而生成遵循某个接口的对象的典型方式就是工厂方法设计模式。这与直接调用构造器不同，在工厂对象上调用的是创建方法，而该工厂对象将生成接口的某个实现的对象。理论上，通过这种方式，我们的代码将完全与接口的实现分离，这就使得可以透明地将某个实现替换为另一个实现。

## 总结

“确定接口是理想选择，因而总是选择接口而不是具体的类。”这其实是一种引诱。当然，对于创建类，几乎在任何时刻，都可以替代为创建一个接口和一个工厂。

任何抽象性都应该是应真正的需求而产生的。当必须时，应当重构接口而不是到处添加额外级别的间接性，并由此带来的额外的复杂性。这种额外的复杂性非常显著，容易让人质疑设计。

恰当的原则应该是有限选择类而不是接口。从类开始，如果接口的必需性变得非常明确，那么就进行重构。接口是一种重要的工具，但是它们容易被滥用。