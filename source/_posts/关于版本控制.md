---
title: 关于版本控制
date: 2017-10-19 22:06:56
tags: [Git,翻译]
---
> 本章的主要内容是关于git的使用指南，前面讲述版本控制工具的历史，接着讨论如何让git在你的系统中运行，最后是关于如何设置工作环境；在本章的最后，你会明白Git存在的意义，为什么你要使用它，你应该一直这样去做。

<!--more-->

## 关于版本控制（VCS,Version Control System）
什么是“版本控制”？为什么你要关心这件事？版本控制是一个系统，以时间顺序记录一个或一组文件的变更，以便你能够回溯到指定版本。本书以源码为例进行版本控制，在真实环境中你可以使用版本控制几乎所有计算机中存储的文件类型。

如果你是图像或者WEB设计者，想要保存图像或者布局的每一个版本（你确实想存的那个版本），那么版本控制系统是非常值得使用的；它可以让你的文件恢复上一个保存的状态，甚至是恢复整个项目到上一个状态，也能比较不同时间上文件的变化，看到最后一个修改项目可能导致问题的那个人，找到真正写出问题代码的人，甚至可以确定他在什么时候写的，当然，还有很多其他的功能。使用了版本控制系统也能让你在搞坏系统，丢失文件后，能够很简单的回复到正常的状态。除此之外，版本控制系统的花销也很小哦。

### 本地版本控制系统（LVCS,Local Version Control System）
很多选择控制版本的方式是把文件复制到其他文件夹（聪明人会采用时间戳文件夹）。这种方法很普遍，因为它太简单了；但是它也容易产生错误，比如很容易忘记你是在操作哪一个文件夹，意外的将错误的文件覆盖了你不想操作的文件。

问了解决复制文件方式带来的问题，远古的程序猿开发出了本地版本控制系统，使用一个简单的数据库用来存储控制所有的历史版本。

![](https://codefinger.cn/wp-content/uploads/2017/10/Git-Pro-1-1.png)

图 1 本地版本控制系统
一个很出名的版本的控制系统是RCS，至今仍部署在很多的计算机中。即使是有名的Mac OS X 系统，当你安装了开发者工具后，也包括了rcs指令；RCS通过打补丁（记录文件间的不同点）压缩到特殊格式保存到磁盘中实现；它可以通过添加补丁文件，重现任一文件在任何时刻的状态。

### 中心版本控制系统（CVCS,Centralized Version Control Systems）
下一个主要问题是，不同系统的开发者们在合作开发时遇到冲突。为了解决这个问题，中心版本控制系统被开发出来；如CVS，Subversion与Perforce，这些版本控制系统，用一个中心服务器来存储所有版本的文件，许多客户机从中央机复制文件到本机中，这是一个颇为复杂的名为checkout 的过程。这种方式被视为标准的版本控制方式持续了很多年。

![](https://codefinger.cn/wp-content/uploads/2017/10/Git-Pro-1-2.png)

图 2 中心版本控制系统
这种设置方式有很多优点，尤其是和本地版本控制系统比较。比如说，项目中的每一个人都能在一定程度上知道其他人在做什么；管理员能够细粒度的控制每个人能够做什么；管理一个中心版本控制系统远比在每台机器上都解决本地数据库问题要简单。

然而，这种方式也存在一些很严重的问题。最具代表性的问题就是中心服务器的单点故障，如果服务器宕机了一个小时，在这一个小时期间，没人能够合作开发，或者推送自己的开发内容。如果服务器的磁盘损坏，又没有适当的备份，你将会失去一切——整个项目的历史，除了开发者保存在本地的内容。本地版本控制系统同样存在这个问题——无论何时，如果你把项目存放到一个地方，都会面临丢失的危机。

### 分布式版本控制系统（DVCS,Distributed Version Control Systems）
分布式版本控制系统是这样实现的，在DVCS中（如：Git, Mercurial, Bazaar, Darcs），客户端在checkout时不仅复制文件的快照：而是复制整个文件仓库。因此，当任一服务器宕机，不同系统开发者可以通过复制了文件仓库的机器继续合作开发，任一客户端的文件仓库都可以作为服务器的文件备份，随时可以进行替换。所以说，每一次克隆都是对所有数据的备份。

![](https://codefinger.cn/wp-content/uploads/2017/10/Git-Pro-1-3.png)

图 3 分布式版本控制系统
除此之外，这些分布式版本控制系统可以设置不同的远程存储库，因此你就可以在同一项目中， 同时和不同组的人进行协作开发。这就可以让你设置不同的工作流，如分层模型，这在中心版本控制系统是不可能实现的，