---
title: Java编程思想 第19章 枚举类型
date: 2017-12-04 22:05:33
tags: [读书笔记, Java编程思想]
---
> 关键字enum可以将一组具名的值的有限集合创建为一种新的类型，而这些具名的值可以作为常规的程序组件使用。这是一种非常有用的功能。

<!--more-->

## 基本enum特性

调用values()方法，可以遍历enum实例。values()方法返回enum实例的数组，通过静态导入enum，可以简化enum代码。

## 向enum中添加新方法

除了不能继承自一个enum之外，基本上可以将enum看作一个常规的类。在enum实例序列的最后添加分号，然后定义方法。

## switch语句中的enum

在switch中使用enum，是enum提供的一项非常便利的宫娥能。一般来说，在switch中只能使用整数值，而枚举实例天生就具备整数值的次序，并且可以通过ordinal方法取得其次序，因此可以在switch语句中使用enum。

## values的神秘之处

enum类都继承自Enum类。但是Enum类并没有values方法，这是因为values是由编译器添加的static方法。由于values方法是由编译器插入到enum定义中的static方法，所以，当enum实例向上转型为Enum后，values方法就不可访问了，需要通过Class对象的getEnumConstants方法。

## 实现，而非继承

由于Java不支持多重继承，所以enum可以实现一个或多个接口。

## 随机选取

利用泛型操作来支持generator方法，可以消除很多重复代码。

## 使用接口组织枚举

在一个接口的内部，创建实现该接口的枚举，以此将元素进行分组，可以达到将枚举元素分类组织的目的。

## 使用EnumSet替代标志

Java SE5引入EnumSet，是为了通过enum创建一种替代品，以替代传统的基于int的位标识。这种标志可以用来表示某种“开/关”信息。

## 使用EnumMap

EnumMap是一种特殊的Map，它要求其中的键必须来自一个enum。由于enum本身的限制，所以EnumMap在内部可由数组实现。因此EnumMap的速度很快。

## 常量相关的方法

Java的enum有一个非常有趣的特性，即它允许程序员位enum实例编写方法，从而为每个enum实例赋予各自不同的行为。

## 多路分发

Java只支持单路分发。也就是说，如果要执行的操作包含了不止一个类型未知的对象时，那么Java的动态绑定机制只能处理其中一个的类型。所以必须自己判断其他的类型，实现自己的动态绑定行为。解决这个问题的方法就是多路分发。多态只能发生在方法调用时，所以，要实现多路分发，必须有多个方法调用。

## 总结

虽然Java中的枚举比C或C++中的enum更成熟，但它仍然是一个“小”功能。但正是因为这些个“小”功能，才能够优雅而干净地解决问题。优雅与清晰很重要，正式它们区别了成功的解决方案与失败的解决方案。而失败的解决方案就是因为其他人无法理解它。