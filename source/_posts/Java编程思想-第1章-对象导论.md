---
title: Java编程思想 第1章 对象导论
date: 2017-11-16 22:21:30
tags: [读书笔记, Java编程思想]
---
> 我们之所以将自然界分解，组织成各种概念，并按其含义分类，主要是因为我们是整个口语交流社会共同遵守的协定的参与者，这个协定以语言的形式固定下来......除非赞成这个协定中规定的有关语言信息的组织和分类，否则我们根本无法交谈。——Benjamin Lee Whorf(1897 - 1941)

<!--more-->

## 抽象过程

所有编程语言都提供抽象机制。可以认为，人们所能够解决的问题的复杂性直接取决于抽象的类型和质量。所谓的类型是指所抽象的是什么？汇编语言是对底层机器的轻微抽象。接着出现的许多所谓命令式语言(如FORTRAN、BASIC、C等)都是对汇编语言的抽象。这些语言再汇编语言基础上有了大幅的改进，但是它们所作的主要抽象仍要求再解决问题时基于计算机的结构，而不是基于所要解决的问题的结构来考虑。程序员必须建立起再机器模型(位于解空间内，这是对问题建模的地方，例如计算机)和实际待解问题的模型(位于问题空间内，这是问题所在的地方，例如一项业务)之间的关联。建立这种映射是费力的，而且这不属于编程语言所固有的功能，这使得程序难以编写，并且维护代价高昂，同时也产生了作为副产物的整个编程方法行业。

另一种对机器建模的方式就是只针对待解决问题建模。这些方式对于他们所要解决的特定类型的问题都是不错的解决方案，但是一旦超出其特定领域，它们就力不从心了。

面向对象方式(Object Oriented Programming, OOP)通过向程序员提供表示问题空间中的元素的工具而更进了一步。这种表示方式非常通用，是的程序员不会受限于任何特定类型的问题。将问题空间中的元素及其在解空间中的表示称为对象。这种思想的实质是：程序可以通过添加新类型的对象使自身适用于某个特定问题。因此，当在阅读描述解决方案的代码的同时，也是在阅读问题的表述。

Alan Kay曾经总结了第一个成功的面向对象语言，同时也是Java所基于的语言之一的Smalltalk的五个基本特性，这些特性表现了一种纯粹的面向对象程序设计方式。

- 万物皆为对象，将对象视为奇特的变量，它可以存储数据，除此之外，还可以要求它在自身上执行操作。
- 程序是对象的集合，它们通过发送消息来告知彼此所要做的。要想请求一个对象，就必须对该对象发送一条消息。
- 每个对象都有自己的由其他对象所构成的存储。换句话说，可以通过创建包含现有对象的包的方式来创建新类型的对象。
- 每个对象都拥有其类型。按照通常的说法，每个对象都是某个类的一个实例。
- 某一特定类型的所有对象都可以接收同样的消息。这种可替代性是OOP中最强有力的概念之一。

Booch 对对象提出了一个更加简洁的描述：对象具有状态、行为和标识。这意味着每一个对象都可以拥有内部数据和方法，并且每一个对象都可以唯一地与其他对象区分开来，具体来说，就是每一个对象在内存中都有一个唯一的地址。

## 每个对象都有一个接口

亚里士多德大概是第一个深入研究类型的哲学家，他曾提出过鱼类和鸟类这样的概念。所有的对象都是唯一的，但同时也是具有相同的特性和行为的对象所归属的类的一部分。每个对象都只能满足某些请求，这些请求由对象的接口的定义，决定接口的便是类型。接口确定了对某一特定对象所能发出的请求。但是，在程序中必须有满足这些请求的代码。这些代码与隐藏的数据一起构成了实现。

## 每个对象都提供服务

当正在试图开发或理解一个程序设计时，最好的方法之一就是将对象想象为服务提供者，程序本身将向用户提供服务，他将通过调用其它对象提供的服务来实现这一目的。将对象看作时服务提供者还有一个附带的好处：它有助于提高对象的内聚性。高内聚时软件设计的基本质量要求之一：这意味着一个软件构件的各个方面组合得很好。

将对象作为服务提供者看待是一件伟大的简化工具，这不仅在设计过程中非常有用，而且当其他人试图理解你的代码或重用某个对象时，如果他们看出了这个对象所能提供的服务的价值，它会使调整对象以适应其设计的过程变得简单得多。

## 被隐藏得具体实现

将程序开发人员按照角色分为类创建者和客户端程序员是大有裨益得。在任何相互关系中，具有关系所涉及的各方都遵守的边界是十分重要的事情。

因此，访问控制的第一个存在的原因就是让客户端程序员无法触及他们不应该触及的部分。

访问控制的第二个存在的原因就是允许库设计者可以改变类内部的工作方式而不用担心会影响到客户端程序员。

Java用三个关键字在类的内部设定边界：public,private,protect。还有另外一种默认的访问权限，当没有使用前面提到的任何访问指定词时，这种称为包访问权限的访问权限将发挥作用。

## 复用具体实现

一旦类被创建并被测试完，那么它就应该代表一个有用的代码单元。事实证明，这种复用性并不容易达到我们所希望的那种程度，产生一个可复用的对象设计需要丰富的经验和敏锐的洞察力。但是一旦有了这样的设计，它就可以复用n.daima复用时面向对象程序设计语言所提供的最了不起的优点之一。

最简单地复用某个类的方式就是直接使用该类的一个对象，此外也可以将那个类的一个对象置于某个新的类中。这种概念称为组合，如果组合是动态发生的，那么它通常被称为聚合。

## 继承

使用组合方式来实现复用仍然存在问题：在创建了一个类之后，即使另一个新类与其具有相似的功能，还是得重新创建一个新类。通过继承就可以达到一种以现有的类为基础，复制它，然后通过添加和修改这个副本来创建新类。

当继承现有类型时，也就创造了新的类型。这个新的类型不仅包括现有类型的所有成员，而且更重要的是它复制了基类的接口。也就是说，所有可以发送给基类对象的消息同时也可以发送给导出类对象。由于通过发送给类的消息的类型可知类的类型，所以这也就意味着与基类具有相同的类型。

## 伴随多态的可互换对象

在处理类型的层次结构时，经常想把一个对象不当作它所属的特定类型来对待，而是将其当作其基类的对象来对待。这使得人们可以编写出不依赖于特定类型的代码。不用担心对象将如何处理消息。

## 单根继承结构

在OOP中国，自C++面试以来就已变得非常瞩目的一个问题就是，是否所有的类最终都继承自单一的基类。在Java中，答案时yes，这个终极基类就是Object。

单根继承结构使垃圾回收器的实现变得容易很多。由于所有对象都保证具有其类型信息，因此不会因无法确定对象的类型而陷入僵局。

## 容器

容器可以在任何需要时都可以扩充自己以容纳置于其中的所有东西。如解决某个特定的问题时需要多少个对下给你，或者它们将存活多久。

一开始，容器通过Object这个终极基类来存储对象，这样可以使得容器可以用来存储所有类型的对象，但是这种存储方式会导致对象向上转型，在将对象取出时就很难转化回来，因此引入了范型的概念。通过一对尖括号，中间包括类型信息，就可以指明容器是用来存储哪种类型的对象。

## 对象的创建和声明周期

对于栈空间的内存使用，当对象退出栈时就对其占有的内存进行销毁是十分容易解决的。不容易的部分是堆空间的内存使用，因为很难自动判断出其中的空间是否还在使用，Java自带的垃圾回收机制就是用来自动识别堆空间使用，然后释放其中不再使用的内存，因此也衍生出不同的垃圾回收算法。

## 异常处理

Java一开始就内置了异常处理，而且必须强制使用。是唯一可接受的错误报告方式。

值得注意的是，异常处理不是面向对象的特征，异常处理在面向对象语言唇线之前就已经存在了。

## 并发编程

Java的并发是内置于语言中的，添加了很多额外的库支持。

## Java和Internet

提出了Java在B/S编程的地位。有已经不怎么使用的applet及其替代产品Flex。也有外包产品常用的Servelet和JSP。

## 总结

面向过程的语言主要特点是：数据定义和函数调用。对于解决问题时，需要将业务场景与具体的逻辑进行转换，是相当复杂的部分。

面向对象编程主要由两方面来定义：用来表示问题空间概念的对象，以及发送给这些对象的用来表示在此空间内的行为的消息。

面向对象程序设计带来的好处就是：对于设计良好的程序，通过阅读它就可以很容易地理解其代码。通常其代码也会少很多，因为许多问题都可以通过重用现有的类库代码而得到解决。而也因为这种多层次的调用，给很多新手程序员带来很多痛苦，当代码发生错误时无法确定是哪里产生的原因。