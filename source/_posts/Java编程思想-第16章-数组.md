---
title: Java编程思想 第16章 数组
date: 2017-12-02 01:01:55
tags: [读书笔记, Java编程思想]
---
> 在第5章的末尾，许锡勒如何定义并初始化一个数组。

## 数组为什么特殊

Java中有大量其他的方式可以持有对象，数组与其他种类的容器之间的区别有三方面：效率、类型和保存基本类型的能力。在Java中，数组是一种效率最高的存储和随机访问对象引用序列的方式。数组是一个简单的线性序列，这使得元素访问非常迅速。但是这种速度所付出的代价是数组对象的大小被固定，并且在其声明周期中不可改变。

在泛型之前，其他的容器类在处理对象时，都将它们视作没有任何具体类型。数组之所以优于泛型之前的容器，就是因为可以创建一个数组去持有某种具体类型。这意味着可以通过编译期检查，来放置插入错误类型和抽取不当类型。

## 数组是第一级对象

无论使用那种类型的数组，数组标识符其实只是一个引用，指向在堆中创建的一个真是对象，这个数组对象用以保存指向其他对象的引用。可以作为数组初始化语法的一部分隐式地创建此对象，或者用new表达式显式地创建。只读成员length是数组对象的一部分，表示此数组对象可以存储多少元素，"[]"语法是访问数组对象的唯一方式。

## 返回一个数组

C和C++不能返回一个数组，只能返回指向数组的指针。因为它使得控制数组的生命周期变得困难，并且容易造成内存泄露。在Java中可以直接返回一个数组，垃圾回收器会自动处理它。

## 多维数组

创建多维数组很方便。对于基本类型的多维数组，可以通过使用或括号将每个向量分隔开；数组中构成矩阵的每个向量都可以具有任意的长度(这被称为粗糙数组)

## 数组与泛型

通常，数组与泛型不能很好地结合。不能实例化具有参数化类型的数组，因为擦除会移除参数类型信息，而数组必须知道它所持有的确切类型，以强制保证类型安全，但是可以参数化数组本身的类型。

## 创建测试数据

- Arrays.fill：用同一个值填充各个位置，如果是对象，则复制同一个引用。
- 数据生成器：运用策略设计模式生成Generator方法。
- 从Generator中创建数组：配合生成器创建数组。

## Arrays实用功能

- 复制数组
- 数组的比较
- 数组元素的比较
- 数组排序
- 在已排序的数组中查找


## 总结

Java对尺寸固定的低级数组提供了适度的支持。这种数组强调的是性能而不是灵活性。在Java的初始版本中，容器并不能持有基本类型，但是有了额外的自动包装机制和泛型，容器获得了十足的改进。所以固定长度的低级数组除了性能外没有别的优势了。