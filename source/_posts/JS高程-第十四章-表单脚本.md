---
title: JS高程 第十四章 表单脚本
date: 2017-11-04 20:57:36
tags: [读书笔记, JavaScript高级程序设计]
---

> JavaScript 最初的一个应用就是分担服务器压力，复杂处理部分表单职责，打破处处以来服务器的局面。
<!--more-->

## 表单的基础知识

在HTML文档中，表单是由form元素来表示的，而在JavaScript中，表单对应的则是HTMLFormElement类型。HTMLFormElement继承自HTMLElement，因此也具备其他HTML元素相同的默认属性。但是也有自己的属性：

- acceptCharset: 表示服务器能够处理的字符集；等价于HTML中的accept-charset特性。
- action: 接受请求的URL；等价于HTML中的action特性。
- elements: 表单中所有的控件的集合。
- enctype: 请求的编码类型。
- length: 表单中控件的数量。
- method: 要发送的HTTP请求类型，通常是get或post；
- name: 表单的名称。
- reset: 将所有表单域重置为默认值。
- submit: 提交表单。
- target: 用于发送请求和接受请求的窗口名称。

取得form元素引用的方式一般是看成和其他元素一样，添加id属性并通过getElementById获得form元素的引用。

- 提交表单： 用户单击提交按钮和图像按钮时，就会提交表单。使用input或button都可以定义提交按钮。
- 重置表单： 通过设置按钮的type特性值为reset，就可以定义表单的重置。
- 表单字段： 使用表单的元素和使用其他元素的方式基本相同。

## 文本框脚本

在HTML中，有两种方式来表现文本框：一种是使用input元素的单行文本框，另一种是使用textarea的多行文本框。这两个控件非常类似，而且多数时候的行为差不多。

input元素可以通过设置size特性，指定文本框显示的字符数。通过maxlength可以设置文本框最多可以接受的字符数。textarea元素要制定文本框的大小需要使用rows和cols特性。rows特性制定文本框的行数，cols则是制定文本框的列数。

### 选择文本

上述两个文本框都支持select方法，这个方法用于选择文本框中所有的文本。实际上就是在文本中创建了一个范围，在前几章已经说过的。

### 过滤输入

通过监听文本框输入时的键盘就可以过滤输入内容。可以进行屏蔽字符，操作剪贴板的操作。

### 自动切换焦点

文本框的自动切换焦点功能，实际上就是为了实现选择的需求，对于限制用户输入内容有重要意义。

## 选择框脚本

选择框式通过select和option元素创建的。通过选择框事件获取文本输入，比文本输入更加的安全。

### 选择选项

对于只允许选择一项的选择框，访问选中项的最简单，就是使用选择框的selectedIndex属性。

### 添加选项

可以使用JavaScript动态创建选项，并将它们添加到选择框。

### 移除选项

与添加选项类似，移除选项的方式也有很多：

- 使用DOM的removeChild方法
- 使用选择框的remove方法
- 设置对应选项为null

### 移除和重排选项

在DOM标准出现之前，将一个选择框中的选贤桂东到另一个选择框中是非常麻烦的。整个过程要涉及从第一个选择框中移除选项，然后以相同的文本和值创建新选项。

有了DOM标准，就可以将选择框中的某一项移动到特定位置，最合适的DOM方法就是insertBefore。

## 表单序列化

随着Ajax的出现，表单序列化以成为一种常见的需求。在JavaScaript中，可以利用表单字段的type属性，联通name和value属性实现对表单的序列化。

## 富文本编辑

富文本编辑，又称为WYSIWYG(What You See Is What You Get，所见即所得)。在HTML文档中最常见的表现就是文本编辑，在编写博客时显示的文本框就叫做富文本。

## 小结

虽然HTML和Web应用自诞生以来已经发生了翻天覆地的变化，但Web表单相对却没有什么改变，实际上，在比较先进的前端系统中，通常使用异步方式传输数据，而不是采用表单的方式。在本章中，主要介绍了一下几个概念：

- 可以使用一些标准或非标准的方法选择文本框中的全部或部分文档。
- 大多数浏览器都采用了Firefox操作选择文本的方式，但IE仍然坚持自己的实现。

选择框也是经常要通过JavaScript来控制的一个表单字段。

富文本编辑功能是通过一个包含空HTML文档的iframe元素来实现的。通过将空文档的designMode属性设置为on，就可以将该页面转换为可编辑转台，此时其表现如同字处理软件。
