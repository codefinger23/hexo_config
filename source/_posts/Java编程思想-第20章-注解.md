---
title: Java编程思想 第20章 注解
date: 2017-12-05 22:21:11
tags: [读书笔记, Java编程思想]
---
> 注解(也被称为元数据)为我们在代码中添加信息提供了一种形式化的方法，使我们可以在稍后某个时刻非常方便地使用这些数据。
<!--more-->
## 基本语法

基本语法部分有定义注解和使用注解，除了@符号以外，注解的定义和接口很像，定义注解需要一些元注解，如@Target和@Retention。

## 编写注解处理器

使用注解的过程中，很重要的一个部分就是创建与使用注解处理器。Java SE5扩张了反射机制的API，可以帮助程序员构造这类工具。还有一个外部工具apt帮助程序员解析带有注解的Java源代码。

## 使用apt处理注解

注解处理工具apt，这是Sun为了帮助注解的处理过程而提供的工具。与javac一样，apt被设计为操作Java源文件，而不是编译后的类。默认情况下，apt会在处理完源文件后编译它们。

## 将观察者模式用于apt

为了防止处理注解的复杂度的攀升，mirror API提供了对观察者模式的支持。观察者会遍历某个数据结构或一个对象的集合，对其中每一个对象执行一个操作。该数据结构无需有序，而对每个对象执行的操作，都是特定于此对象的类型。这就将操作与对象解耦，也就是说，可以添加新的操作而无需向类的定义中添加方法。

## 基于注解的单元测试

单元测试是对类中的每个方法提供一个或多个测试的一种实践，其目的是为了有规律地测试一个雷的各个部分是否具备正确的行为。通过注解，可以很方便地为方法提供测试用例。在Java中，最著名的单元测试工具就是采用这种方式来实现的。

## 总结

注解是Java引入的一项非常受欢迎的补充。它提供了一种结构化的，并且具有类型检查能力的新途径，从而使得程序员能够为代码加入元数据，而不会导致代码杂乱且难以阅读。使用注解能够帮助避免编写累赘的部署描述文件，以及其他生成的文件。